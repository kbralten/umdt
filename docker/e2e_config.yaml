# E2E test configuration for mock Modbus server
# Extended config for scripting E2E tests with predictable values

unit_id: 1

groups:
  # Basic registers (0-19)
  - name: test_holdings
    type: holding
    start: 0
    length: 20
    writable: true

  # System status and motor control registers (50-200)
  - name: interlock_registers
    type: holding
    start: 50
    length: 160
    writable: true

  # Extended test area (500-600)
  - name: extended_holdings
    type: holding
    start: 500
    length: 100
    writable: true

  # Protected range for counter script (1000-1100)
  - name: protected_range
    type: holding
    start: 1000
    length: 101
    writable: true

  - name: test_inputs
    type: input
    start: 0
    length: 10
    writable: false

  - name: test_coils
    type: coil
    start: 0
    length: 16
    writable: true

  - name: test_discretes
    type: discrete
    start: 0
    length: 16
    writable: false

# Freeze some registers at known values for validation
rules:
  # Holding register 0 frozen at 12345
  "0":
    mode: frozen-value
    forced_value: 12345
  # Holding register 1 frozen at 0xABCD (43981)
  "1":
    mode: frozen-value
    forced_value: 43981
  # System status register at 50: start with STATUS_READY (1)
  "50":
    mode: frozen-value
    forced_value: 1

scripts: []

# No artificial latency or faults for E2E tests
latency_ms: 0
latency_jitter_pct: 0.0
faults:
  drop_rate_pct: 0.0
  bit_flip_pct: 0.0

transport:
  tcp_host: 0.0.0.0
  tcp_port: 5021

logging:
  level: INFO
